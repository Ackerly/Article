# JS 中，为什么要在函数前面加！
函数的声明方式有这两种  
``` 
function msg(){alert('msg');}//声明式定义函数

var msg = function(){alert('msg');}//函数赋值表达式定义函数
```
还有第三种声明方式，Function构造函数
``` 
var msg = new function(msg) {
  alert('msg')
}
```
等同于  
``` 
function msg(msg) {
  alert('msg')
}
```
函数的调用方式通常是方法名()
但是，如果我们尝试为一个“定义函数”末尾加上()，解析器是无法理解的。  
``` 
function msg(){
  alert('message');
}();//解析器是无法理解的
```
那为什么将函数体部分用()包裹起来就可以了呢？使用括号包裹定义函数体，解析器将会以函数表达式的方式去调用定义函数。 也就是说，任何能将函数变成一个函数表达式的作法，都可以使解析器正确的调用定义函数。而 ! 就是其中一个，而 + \- || ~ 都有这样的功能。  

**自执行匿名函数：**  
js代码中我们常常会看见这样一种写法：  
``` 
(function( window, undefined ) {
    // code
})(window);
```
这种写法我们称之为自执行匿名函数。正如它的名字一样，它是自己执行自己的，前一个括号是一个匿名函数，后一个括号代表立即执行  
前面也提到 + \- || ~这些运算符也同样有这样的功能  
``` 
(function () { /* code */ } ()); 
!function () { /* code */ } ();  
~function () { /* code */ } (); 
-function () { /* code */ } ();
+function () { /* code */ } ();
```
1. ( ) 没什么实际意义，不操作返回值
2. ! 对返回值的真假取反
3. 对返回值进行按位取反（所有正整数的按位取反是其本身+1的负数，所有负整数的按位取反是其本身+1的绝对值，零的按位取反是 -1。其中，按位取反也会对返回值进行强制转换，将字符串5转化为数字5，然后再按位取反。false被转化为0，true会被转化为1。其他非数字或不能转化为数字类型的返回值，统一当做0处理）
4. ~ +、- 是对返回值进行数学运算 ( 可见返回值不是数字类型的时候 +、- 会将返回值进行强制转换,字符串强制转换后为NaN)

**IIFE（Imdiately Invoked Function Expression 立即执行的函数表达式）**  
``` 
function(){
    alert('IIFE');
}
```
把这个代码放在console中执行会报错,因为这是一个匿名函数，要想让它正常运行就必须给个函数名，然后通过函数名调用。  
在匿名函数前面加上这些符号后，就把一个函数声明语句变成了一个函数表达式，是表达式就会在script标签中自动执行。  
运算符为何能将声明式函数，转译成函数表达式，这里就涉及到了一个概念解析器  
程序在运行之前需要经过编译或解释的过程，把源程序翻译成为字节码，但是在翻译之前，需要把字符串形式的程序源码解析为语法树或者抽象语法树等数据结构，这就需要用到解析器  

**那么什么是解析器？**  


原文:  
[探索在 JS 中，为什么要在函数前面加！](https://mp.weixin.qq.com/s/3bhpz6lZI85miNcvxr_vzw)
