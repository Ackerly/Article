# Vue 性能指标逐渐开始反超 React 了
Chrome 所统计的网站性能指标主要来源于三个维度：    
- LCP[1]（Largest Contentful Paint）
- FID[2]（First Input Delay）
- CLS[3]（Cumulative Layout Shift）

Chrome 的用户体验报告里主要统计到的前端开发框架有：Vue、React、Angular JS、Angular、Preact、Svelte、Next.js、Nuxt.js、SvelteKit ...   

**各大框架性能如何**  
Preact 只有 4kb 左右，而 React 有 32kb 左右，都知道前者是后者的轻量级的替代方案，从图中数据可以看出，这两者性能差不多，甚至在 PC 端的图表数据上来看 Preact 还优于 React  
在业界流传着一句话：大型应用选React，小型应用选Vue  
**资源大小**  
用户报告其实也统计了各个网站 JS 资源下载情况，这也是跟网站性能有所关联的，毕竟资源过大或多或少也会减慢页面的渲染速度，尤其是 JS 文件，需要下载再解析  
基本上每个框架构建的网站所需要下载的 JS 资源大小都达到了 1000kb 甚至以上，毕竟 SPA 应用会一次性把所有的文件都下载下来  
Svelte 好像是最优的？这是意料之中的，毕竟跟每个框架的设计有关，Svelte 选择了纯编译时（官方所说的无 runtime），也就是最终编译成直接操作原生 DOM 的代码，那么所需要下载的 JS 资源肯定相较于其它框架是少一些的  
Preact 明明是 React 轻量替代方案，展现的数据来看，Preact 确实最"重"的
**SSR & SSG**  
大家都知道 SSR 和 SSG 的出现就是为了解决 SPA 应用带来的一些性能问题，目的是为了使网站能更快的展现在用户面前，以此来提升网站的性能指标  
SvelteKit 了，它的数据指标似乎比其它的框架高出了将近一倍，不过可惜的是统计到的数据只有 33 个，相较于其它框架的数量差距太大了，留个悬念吧，不知道等它量级起来后，是否还能保持这样的性能  
- Next.js 的 LCP 指标远 低 于 React
- Nuxt.js 的 LCP 指标远 高 于 Vue

回到 LCP 指标本身，其目前并不会计算所有元素，因为这样会使这个指标变得非常复杂，它现在只关注下面的元素：  
- <img> 元素
- <svg> 元素
- <video> 元素
- 通过 url() 函数加载背景图片的元素
- 包含文本节点或其他内联文本元素子级的块级元素。

大部分网站都是以图片为主导元素的，有没有可能是图片影响的？了解 Next.js 的人都知道，该框架自己封装了一个 image 组件，该组件内部对图片做了很多处理，例如：利用内置的代理服务器对图片进行 格式转换、压缩、懒加载，利用 srcset[4] 属性对图片进行优化  
这些虽然看起来是 Next.js 的优点，但其实也是它的缺点，在对图片进行处理时肯定会有一些耗时，影响渲染速度  
Next.js 应用图片下载量很小，但它的 LCP 指标仍然垫底？？？反而 Nuxt.js 的数据令人惊叹，图片下载量将近是 Next.js 的三倍，LCP 指标还远远高于它  

原文: 
[Vue 性能指标逐渐开始反超 React 了](https://mp.weixin.qq.com/s/DPSAJCdlfg064Dgyv6HisA)
