# 在项目中如何封装axios
## 封装思路
一次性集中配置axios，让配置适应我们项目的大部分场景。新建一个js文件，使用自定义配置新建一个 axios 实例，然后对实例进行基本配置，在请求前(请求体处理)，请求后(返回的结果处理)等这些阶段添加一些我们需要的处理，然后将其导出使用。
## 配置的优先顺序
会以一个优先顺序进行合并。这个顺序是：在 lib/defaults.js 找到的库的默认值，然后是实例的 defaults 属性，最后是请求的 config 参数。(这样有些特殊的场景也可以单独处理)
## axios实例配置
### 定义一些常规的配置
- 设置BaseUrl
> baseUrl一般有分为生产、开发、测试等多个地址，我们可以弄一个config.js进行存放，如果是vue或react我们可以新建env等文件进行存放，下面的baseUrl是使用react的环境变量的。
- 设置timeout请求超时的时间
- 设置数据请求的格式Content-Type(有 application/x-www-form-urlencoded、multipart/form-data、application/json...)等等
### 请求前添加一些操作
- 请求头添加token
- 请求参数判断空处理
- 每次接口请求时开启loading动画效果等等
### 请求返回添加拦截操作
-  处理成功返回的数据  
比如后端返回的data数据可能嵌套了很多层，你可以直接返回你需要的data数据，这样业务代码就可以直接拿到最终的数据，而不用每次去解构之类的。
- 统一处理失败后的异常报错  
接口请求有成功也有失败，如果你不想在每写一个接口请求的时候都需要去写一遍失败的逻辑代码，并且几乎都是重复的时候，那你可以在这里集中进行接口的统一的异常处理。如判断状态码或后端自定义的code，并把后端返回的错误提示显示出来。
## 请求接口方法统一管理
新建一个管理api请求的文件夹(如apiList)，里面放我们各种请求文件(这里按功能分)。如user.js就存放用户相关的请求，其他类推。然后页面就可以直接引用方法进行接口调用。

参考：  
[在项目中如何封装axios](https://juejin.cn/post/7009629858993012743)
